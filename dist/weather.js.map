{"version":3,"sources":["webpack:///webpack/bootstrap d9a8ccb9aee0dfe3ac0c","webpack:///./node_modules/@cnpm/cookie-util/index.js","webpack:///./index.js","webpack:///./src/weather.js","webpack:///./node_modules/@cnpm/storage/index.js","webpack:///./src/city.js","webpack:///./src/jsonp.js","webpack:///./src/version.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","decode","arr","cookies","document","cookie","reg","RegExp","match","this","decodeStr","set","value","expires","domain","path","secure","encodeURIComponent","Date","toGMTString","setTime","getTime","days","str","ret","len","length","chr","charAt","asc","substring","parseInt","decodeURI","String","fromCharCode","deleteCookie","date","apply","undefined","weatherStorageKey","storageObj","CONST","StoragePolyfill","CookieUtil","City","jsVersion","Weather","WEATHER_ICON","晴","阴","多云","小到中雨","小雨","大雨","阵雨","中雨","中雪","暴雪","暴雨","小雪","阵雪","雨夹雪","大暴雨","大雪","冻雨","浮尘","雷阵雨","雷阵雨伴有冰雹","霾","强沙尘暴","沙尘暴","特大暴雨","雾","扬尘","default","WEATHER_ICON_URL","WEATHER_DETAIL_ID","WID_WRAP","WID","WOUTER_ID","OLD_WPREV_ID","isExists","text","flag","index","indexOf","isTrue","weatherCut","data","strExists","getWeatherData","self","storageVal","version","requestWeatherData","cookieCode","cityCodeCookieName","split","cityExt","cityid","formatWeatherData","getCurrentCity","fillStorageWeatherData","weatherData","city","forcast","airQuality","aqiClass","aqiText","w","jToolbarUser","disApi","aqi","tqyb","kqzl","$","weatherStr","weathers","weather","temp","replace","after","html","$wDetailWrap","find","updateWeatherDetail","append","buildWeatherDetail","toggleWeatherDetailWrap","cityID","updateDefCityCode","exec","updateCookieCityInfo","citySearchURL","arrDaysW","todayW","todayWIcon","getWheatherIcon","sevenDaysURL","url","qualitySpan","quality","$sevenWeather","attr","hide","dealWheatherDate","fl","afterThreeW","slice","threeWStr","afterStr","curW","curWIcon","T","$wToolbar","timmer","$wDetailCon","on","clearTimeout","setTimeout","showWeatherDetail","e","window","navigator","userAgent","toUpperCase","ActiveXObject","event","$target","target","parent","hideWeatherDetail","show","one","initCityChange","alert","val","dateStr","ymd","trim","arrayIdx","updateWheatherState","fileName","type","expiresDay","isIE","opera","isInit","documentElement","init","localStorage","addBehavior","key","JSON","stringify","setItem","load","setAttribute","toUTCString","save","t","parse","getItem","r","getAttribute","remove","removeItem","removeAttribute","$JSONP","$jsonp","cities","seachURL","cityURL","defCityCode","getWeatherURL","citystr","allCityCode","arrCode","curCityCode","location","host","defCode","cookieCityCode","sendCityJsonP","province","county","setFullYear","join","areaID","areaType","cityJsonCallback","$wrap","listLen","options","cur","areaid","namecn","setChoosedCity","initProvChange","bindCityChange","sels","cookiesCode","cityCode","$cities","$counties","off","cityJsonCallback0","cityJsonCallback1","cityJsonCallback2","jsonp","callback","callbackFn","createElement","first","getElementsByTagName","src","parentNode","insertBefore","readyState","onreadystatechange","onload","jsonpName","isCache","asy","ajax","dataType","contentType","timeout","cache","async"],"mappings":"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","file":"weather.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d9a8ccb9aee0dfe3ac0c","/**\n * Cookie 操作工具类，包含获取、增加、删除cookie、cookie中文字符解码功能\n */\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // Node, CommonJS\n    module.exports = factory();\n  } else {\n    // 浏览器全局变量(root 即 window)\n    root.CookieUtil = factory();\n  }\n}(this, function() {\n  var CookieUtil = {\n    get: function(name, decode) {\n      var cookies = document.cookie,\n        arr,\n        reg = new RegExp(\"(^|)\" + name + \"=([^;]*)(;|$)\");\n      arr = cookies.match(reg);\n      if (arr) {\n        if (decode === true) {\n          return this.decodeStr(arr[2]);\n        } else {\n          return arr[2];\n        }\n      } else {\n        return null;\n      }\n    },\n    set: function(name, value, expires, domain, path, secure) {\n      var c = encodeURIComponent(name) + \"=\" + encodeURIComponent(value),\n        d = null,\n        days = 30;\n      if (expires instanceof Date) {\n        c += \";expires=\" + expires.toGMTString();\n      } else { /***不设置此参数，默认30天**/\n        d = new Date();\n        d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);\n        c += \";expires =\" + d.toGMTString();\n      }\n      if (path) {\n        c += \";path=\" + path;\n      }\n\n      if (domain) {\n        c += \";domain=\" + domain;\n      }\n\n      if (secure) {\n        c += \";secure\";\n      }\n\n      document.cookie = c;\n    },\n    decodeStr: function(str) {\n      var ret = \"\",\n        i, len = str.length;\n      for (i = 0; i < len; i++) {\n        var chr = str.charAt(i);\n        if (chr == \"+\") {\n          ret += \" \";\n        } else if (chr == \"%\") {\n          var asc = str.substring(i + 1, i + 3);\n          if (parseInt(\"0x\" + asc) > 0x7f) {\n            ret += decodeURI(\"%\" + str.substring(i + 1, i + 9));\n            i += 8;\n          } else {\n            ret += String.fromCharCode(parseInt(\"0x\" + asc));\n            i += 2;\n          }\n        } else {\n          ret += chr;\n        }\n      }\n      return ret;\n    },\n    deleteCookie: function(name, domain, path, secure) {\n      var c = encodeURIComponent(name) + \"=\" + encodeURIComponent(\"a\");\n      var date = new Date();\n      date.setTime(date.getTime() - 10000);\n      c += \";expires =\" + date.toGMTString();\n      if (path) {\n        c += \";path=\" + path;\n      }\n      if (domain) {\n        c += \";domain=\" + domain;\n      }\n      if (secure) {\n        c += \";secure\";\n      }\n      document.cookie = c;\n    }\n  };\n  return CookieUtil;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cnpm/cookie-util/index.js\n// module id = 0\n// module chunks = 0","require('./src/weather.js');\nrequire('./src/weather.css');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 2\n// module chunks = 0","// 天气情况显示\n// 调用本地存储功能\n//@dependence jQuery\nvar StoragePolyfill = require('@cnpm/storage');\nvar CookieUtil = require('@cnpm/cookie-util');\nvar City = require('./city');\nvar jsVersion = require('./version');\n\nvar Weather = function () {\n  var weatherStorageKey = \"chinasoWeather\",\n\n    // 缓存时间（单位：小时）\n    timestampDay = 0.5,\n\n    // 初始化缓存对象\n    // 用于存储天气信息到本地缓存\n    // @params{weatherStorageKey: 缓存 key 值定义, timestampDay: 缓存有效时间}\n    storageObj = new StoragePolyfill(weatherStorageKey, timestampDay);\n  var CONST = {\n    //天气图标名称.\n    WEATHER_ICON: {\n      '晴': ['qing', 'qing-yellow'],\n      '阴': ['yin', 'yin'],\n      '多云': ['duoyun', 'duoyun-yellow'],\n      '小到中雨': ['xiaodaozhongyu', 'xiaodaozhongyu'],\n      '小雨': ['xiaoyu', 'xiaoyu'],\n      '大雨': ['dayu', 'dayu'],\n      '阵雨': ['zhenyu', 'zhenyu-yellow'],\n      '中雨': ['zhongyu', 'zhongyu'],\n      '中雪': ['zhongxue', 'zhongxue'],\n      '暴雪': ['baoxue', 'baoxue'],\n      '暴雨': ['baoyu', 'baoyu'],\n      '小雪': ['xiaoxue', 'xiaoxue'],\n      '阵雪': ['zhenxue', 'zhenxue-yellow'],\n      '雨夹雪': ['yujiaxue', 'yujiaxue'],\n      '大暴雨': ['dabaoyu', 'dabaoyu'],\n      '大雪': ['daxue', 'daxue'],\n      '冻雨': ['dongyu', 'dongyu'],\n      '浮尘': ['fuchen', 'fuchen-yellow'],\n      '雷阵雨': ['leizhenyu', 'leizhenyu'],\n      '雷阵雨伴有冰雹': ['leizhenyubanyoubingbao', 'leizhenyubanyoubingbao'],\n      '霾': ['mai', 'mai-yellow'],\n      '强沙尘暴': ['qiangshachenbao', 'qiangshachenbao-yellow'],\n      '沙尘暴': ['shachenbao', 'shachenbao-yellow'],\n      '特大暴雨': ['tedabaoyu', 'tedabaoyu'],\n      '雾': ['wu', 'wu'],\n      '扬尘': ['yangchen', 'yangchen-yellow'],\n      'default': ['qing', 'qing-yellow']\n    },\n    WEATHER_ICON_URL: 'http://n3.static.pg0.cn/fp/weather/dist/image/@icon@.png',\n    WEATHER_DETAIL_ID: 'weather_detail',\n    WID_WRAP: 'toolbarTopWeather', // 天气外层ID\n    WID: 'jToolbarWeather', // 左侧天气id\n    WOUTER_ID: 'chinaso_weather', //天气外层容器，写在页面中的html\n    OLD_WPREV_ID: 'jToolbarUser' //天气预报应该加入的元素位置，前一个兄弟节点，线上目前使用的该元素来插入天气\n  };\n\n  return {\n    isExists: function (text, flag) {\n      var index = text.indexOf(flag);\n      return {\n        index: index,\n        isTrue: index !== -1 ? 1 : 0\n      };\n    },\n    weatherCut: function (data) {\n      var t = this;\n      var strExists = t.isExists(data, \"转\");\n      if (strExists.isTrue) {\n        return data.substring(0, strExists.index);\n      }\n      return data;\n    },\n    /**\n     * 1.本地缓存版本号和js版本号比对逻辑\n     * 若缓存数据版本号storageVal.version 与js程序版本号storageObj.version不一致\n     * 则更新本地缓存数据\n     * 2.本地缓存数据过期storageVal.expires则更新本地数据\n     * @return {[type]} [description]\n     */\n    getWeatherData: function () {\n      var self = this,\n        storageVal = storageObj.get(weatherStorageKey) || null;\n      if (!storageVal || (typeof storageVal.version == 'undefined') || (storageVal.version != jsVersion)) {\n        self.requestWeatherData();\n        return;\n      }\n      //本地存储逻辑判断\n      if (storageVal) {\n        //判断是否过期\n        if (new Date().getTime() - storageVal.expires > 999) {\n          self.requestWeatherData();\n        } else {\n          //若没有过期，判断cookie中存储的城市Code和localstorage中缓存的天气信息中城市Code是否一致\n          var cookieCode = CookieUtil.get(City.cityCodeCookieName, true);\n          var cookieCity = cookieCode && cookieCode.split(',').length === 3 ? cookieCode.split(',')[2] : '';\n          var storageCity = storageVal.cityExt.cityid;\n          cookieCity === storageCity ? self.formatWeatherData(storageVal) : self.requestWeatherData();\n        }\n      } else {\n        self.requestWeatherData();\n      }\n    },\n    requestWeatherData: function () {\n      City.getCurrentCity();\n    },\n\n    //将天气数据缓存到localstorage中.\n    fillStorageWeatherData: function (weatherData) {\n      var self = this;\n      if (weatherData && weatherData.length) {\n        weatherData = weatherData[0];\n        weatherData.version = jsVersion;\n      }\n      // 计算毫秒数：1000 * 60 * 60 * timestampDay\n      var expires = new Date().getTime() + 36e5 * timestampDay;\n      weatherData.expires = +expires;\n      storageObj.set(weatherStorageKey, weatherData);\n    },\n\n    /**\n     * toolbar左侧天气展示\n     * @param weatherData 天气数据\n     */\n    formatWeatherData: function (weatherData) {\n      var city,\n        forcast,\n        airQuality,\n        aqiClass,\n        aqiText,\n        w,\n        jToolbarUser,\n        disApi = \"\",\n        T = this;\n      if (weatherData) {\n        if (weatherData.length) weatherData = weatherData[0];\n        city = weatherData.cityExt;\n        forcast = weatherData.forcast;\n        airQuality = weatherData.airQuality || {};\n        /***@view{<span>北京：晴 33 ～23℃</span><span class=\"air_quality\">空气质量：86</span><em>轻度污染</em>}**/\n        if (airQuality.aqi >= 0 && airQuality.aqi <= 50) {\n          aqiClass = \"you\";\n          aqiText = \"优\";\n        } else if (airQuality.aqi > 50 && airQuality.aqi <= 100) {\n          aqiClass = \"liang\";\n          aqiText = \"良\";\n        } else if (airQuality.aqi > 100 && airQuality.aqi <= 150) {\n          aqiClass = \"qingdu\";\n          aqiText = \"轻度污染\";\n        } else if (airQuality.aqi > 150 && airQuality.aqi <= 200) {\n          aqiClass = \"zhongdu\";\n          aqiText = \"中度污染\";\n        } else if (airQuality.aqi > 200 && airQuality.aqi <= 300) {\n          aqiClass = \"zhongdu2\";\n          aqiText = \"重度污染\";\n        } else if (airQuality.aqi > 300) {\n          aqiClass = \"yanzhong\";\n          aqiText = \"严重污染\";\n        }\n        var tqyb = encodeURIComponent(city.city + \"天气预报\");\n        var kqzl = encodeURIComponent(city.city + \"空气质量\");\n\n\n        jToolbarUser = $(\"#\" + CONST.OLD_WPREV_ID);\n        var weatherStr = forcast.weathers[0].weather;\n        //处理天气描述过长的问题\n        weatherStr = weatherStr.length <= 4 ? weatherStr : (weatherStr.split('转')[0] || weatherStr.substring(0, 5));\n        if (aqiText) {\n          disApi = '<em class=\"' + aqiClass + '\">' + aqiText + '</em>';\n          w = '<a rel=\"external nofollow\"  target=\"_blank\" href=\"http://www.chinaso.com/search/pagesearch.htm?q=' + tqyb + '\">' +\n            city.city + ' ' + weatherStr + \" \" + forcast.weathers[0].temp.replace('℃', '') +\n            '</a><a rel=\"external nofollow\"  target=\"_blank\"' +\n            ' href=\"http://www.chinaso.com/search/pagesearch.htm?q=' + kqzl + '\" class=\"air_quality\">' + disApi +\n            '</a>';\n        } else {\n          w = '<a rel=\"external nofollow\"  target=\"_blank\" href=\"http://www.chinaso.com/search/pagesearch.htm?q=' + tqyb + '\" style=\"margin-right:0;\">' +\n            city.city + ' ' + weatherStr + \" \" + forcast.weathers[0].temp.replace('℃', '') +\n            '</a>';\n        }\n\n        //判断天气预报将要展示的外层容器或者兄弟位置存在不，若不存在，退出.\n        if (jToolbarUser.length) {\n          if (!$('#' + CONST.WID_WRAP).length) {\n            jToolbarUser.after('<div class=\"fl top_weather\" id=\"' + CONST.WID_WRAP + '\" log_action=\"598a758fec6e0f76098ffa69\"><div class=\"top_data\"><span id=\"' +\n              CONST.WID + '\"></span><i>|</i></div></div>');\n          }\n        } else if ($(\"#\" + CONST.WOUTER_ID).length) {\n          if (!$('#' + CONST.WID_WRAP).length) {\n            $(\"#\" + CONST.WOUTER_ID).html('<div class=\"fl top_weather\" id=\"' + CONST.WID_WRAP + '\" log_action=\"598a758fec6e0f76098ffa69\"><div class=\"top_data\"><span id=\"' +\n              CONST.WID + '\"></span><i>|</i></div></div>');\n          }\n        } else {\n          return false;\n        }\n\n        var $wDetailWrap = $('#' + CONST.WID_WRAP);\n        var $wCon = $('#' + CONST.WID);\n\n        $wCon.html(w);\n\n        //add by huangxiaoli 添加鼠标滑过展示四天天气预报逻辑\n        var $wDetail = $wDetailWrap.find('#' + CONST.WEATHER_DETAIL_ID);\n        if ($wDetail.length) {\n          T.updateWeatherDetail(weatherData);\n        } else {\n          $wDetailWrap.append(T.buildWeatherDetail());\n          T.updateWeatherDetail(weatherData);\n          T.toggleWeatherDetailWrap();\n        }\n\n        //重置city中默认的citycode.\n        var cityID = city.cityid;\n        //拿到接口返回的城市数据后更新默认城市code.\n        //初次请求若不传城市信息，则后台进行Ip定位，定位到省级.\n        if (!CookieUtil.get(City.cityCodeCookieName)) {\n          City.updateDefCityCode(/(\\d{2})(\\d{4})/.exec(cityID)[1] + '0000', /(\\d{3})(\\d{3})/.exec(cityID)[1] + '100', cityID);\n          City.updateCookieCityInfo();\n        }\n      }\n    },\n\n    /**\n     * 构建四天天气预报不依赖数据的部分结构.\n     */\n    buildWeatherDetail: function () {\n      var str = '<div class=\"weather_con\" id=\"' + CONST.WEATHER_DETAIL_ID +\n        '\" style=\"display:none\"><i class=\"weather_horn\"></i><a class=\"weather_seven\" href=\"#\"' +\n        ' target=\"_blank\">未来七天天气</a>' +\n        '<div class=\"weather_title\"><i></i><span class=\"weather_city\"></span>' +\n        '<a href=\"javascript:;\" class=\"weather_change\">[切换城市]</a></div>' +\n        '<div class=\"weather_select\" style=\"display:none\"><select class=\"province\" id=\"s_province\"></select>' +\n        '<select class=\"city\" id=\"s_city\"></select><select class=\"county\" id=\"s_county\"></select>' +\n        '<input type=\"button\" id=\"weatherSubmit\" class=\"ok\" value=\"更换\"></div>' +\n        '<div class=\"weather_day\"></div><div class=\"weather_list clearb\"></div></div>';\n\n      return str;\n    },\n\n    /**\n     * 填充四天天气预报数据.\n     * @param $wDetailWrap\n     * @param weatherData\n     */\n    updateWeatherDetail: function (weatherData) {\n      var T = this;\n      var $wDetailWrap = $('#' + CONST.WEATHER_DETAIL_ID);\n      var airQuality = weatherData.airQuality;\n      var cityExt = weatherData.cityExt;\n      var city = cityExt.city;\n      var citySearchURL = 'http://www.chinaso.com/search/pagesearch.htm?q=' + encodeURIComponent(city + '天气预报');\n      var arrDaysW = weatherData.forcast.weathers;\n      var todayW = arrDaysW[0];\n      var todayWIcon = T.getWheatherIcon(todayW.weather, 1);\n      var sevenDaysURL = cityExt.url || '';\n\n      //空气质量数据处理.\n      var qualitySpan = '';\n      if (airQuality.aqi || (airQuality.quality && airQuality.quality !== '无')) {\n        qualitySpan = '<span class=\"quality\">';\n        if (airQuality.aqi) {\n          qualitySpan += '<i class=\"quality_digit\">' + airQuality.aqi + '</i>';\n        }\n        if (airQuality.quality && airQuality.quality !== '无') {\n          qualitySpan += '<i class=\"quality_degree\">' + airQuality.quality + '</i>';\n        }\n        qualitySpan += '</span>';\n      }\n\n      var $sevenWeather = $wDetailWrap.find('.weather_seven');\n      if (sevenDaysURL) {\n        $sevenWeather.attr('href', sevenDaysURL);\n      } else {\n        $sevenWeather.hide();\n      }\n      $wDetailWrap.find('.weather_title').find('i').html(T.dealWheatherDate(todayW.date) + '-');\n      $wDetailWrap.find('.weather_title').find('.weather_city').html(city);\n      $wDetailWrap.find('.weather_day').html('<a href=\"' + citySearchURL + '\" target=\"_blank\"><div class=\"weather_day_l\">' +\n        '<img src=\"' + todayWIcon +\n        '\"><span class=\"feature\">' + todayW.weather.substring(0, 8) +\n        '</span></div><div class=\"weather_day_wrap\"><span class=\"weather\">' + todayW.temp.replace('℃', '') +\n        '</span>' + qualitySpan + '<span class=\"wind\">' +\n        todayW.fl + '</span></div></a></div>');\n\n      var afterThreeW = arrDaysW.slice(1);\n      var threeWStr = '';\n      var afterStr = '明天';\n      for (var i = 0, len = afterThreeW.length; i < len; i++) {\n        var curW = afterThreeW[i];\n        var curWIcon = T.getWheatherIcon(curW.weather);\n\n        if (i === 1) afterStr = '后天';\n        if (i >= 2) afterStr = T.dealWheatherDate(curW.date);\n\n        threeWStr += '<a href=\"' + citySearchURL + '\" target=\"_blank\"><div>' +\n          afterStr + '</div><img src=\"' + curWIcon +\n          '\"><div>' + curW.weather + '</div><div>' +\n          curW.temp.replace('℃', '') + '</div></a>';\n      }\n\n      $wDetailWrap.find('.weather_list').html(threeWStr);\n    },\n\n    /**\n     * 天气详细内容展示隐藏切换.\n     */\n    toggleWeatherDetailWrap: function () {\n      var T = this;\n      var $wToolbar = $('#' + CONST.WID_WRAP);\n      var timmer = null;\n      var $wDetailCon = $('#' + CONST.WEATHER_DETAIL_ID);\n\n      $wToolbar.on('mouseenter', function () {\n        clearTimeout(timmer);\n        timmer = setTimeout(function () {\n          T.showWeatherDetail();\n        }, 200);\n      }).on('mouseleave', function (e) {\n        //处理火狐和IE下的bug（鼠标滑到select的下拉列表时，触发mouseleave事件）.\n        if (window.navigator.userAgent.toUpperCase().indexOf('FIREFOX') > -1 || !!window.ActiveXObject || \"ActiveXObject\" in window) {\n          e = e || window.event;\n          $target = $(e.target);\n          if ($target.attr('id') === 's_province' || $target.attr('id') === 's_city' || $target.attr('id') === 's_county' ||\n            $target.parent().attr('id') === 's_province' || $target.parent().attr('id') === 's_city' || $target.parent().attr('id') === 's_county') {\n            return false;\n          }\n        }\n        clearTimeout(timmer);\n        timmer = setTimeout(function () {\n          T.hideWeatherDetail();\n        }, 200);\n      });\n\n      $wDetailCon.find('.weather_change').on('click', function () {\n        $wDetailCon.find('.weather_select').show();\n        // City.renderBack();\n      }).one('click', function () {\n        City.initCityChange();\n      });\n\n      //点击确认按钮\n      $wDetailCon.find('#weatherSubmit').on('click', function () {\n        var selectCity = $('#s_county').find(\"option:selected\").text();\n\n        //console.log(selectCity);\n        if (selectCity) {\n          //点击确定按钮后更新默认天气\n          City.updateDefCityCode($('#s_province').val(), $('#s_city').val(), $('#s_county').val());\n          City.updateCookieCityInfo();\n\n          T.hideWeatherDetail();\n          City.getCurrentCity(); //更新当前页面天气\n        } else {\n          alert('请选择一个城市');\n          return false;\n        }\n      });\n    },\n\n    /**\n     * 天气预报细节展示.\n     */\n    showWeatherDetail: function () {\n      $('#' + CONST.WEATHER_DETAIL_ID).show();\n    },\n\n    /**\n     * 收起天气预报细节展示.\n     */\n    hideWeatherDetail: function () {\n      $('#' + CONST.WEATHER_DETAIL_ID).hide().find('.weather_select').hide();\n    },\n\n    /**\n     * 获取类似12月1日的格式的日期.\n     * @param dateStr 传入的日期格式 @example \"2016-12-01 09:55:58\"\n     * @returns {*}\n     */\n    dealWheatherDate: function (dateStr) {\n      var ymd = $.trim(dateStr).replace(/-0/g, '-').split(' ')[0].split('-');\n      return ymd[1] + '月' + ymd[2] + '日';\n    },\n\n    /**\n     * 获取天气图标路径\n     * @param weather 天气 @example '多云'\n     * @return string 天气图标路径\n     */\n    getWheatherIcon: function (weather, arrayIdx) {\n      arrayIdx = arrayIdx || 0;\n      weather = weather.split('转')[0];\n      return CONST.WEATHER_ICON_URL.replace('@icon@', CONST.WEATHER_ICON[weather] ?\n        CONST.WEATHER_ICON[weather][arrayIdx] : CONST.WEATHER_ICON['default'][arrayIdx]);\n    }\n\n  };\n}();\n\n//天气方法调用.\nWeather.getWeatherData();\n\n/***请求天气回调函数**/\nwindow.updateWheatherState = function (data) {\n  Weather.fillStorageWeatherData(data);\n  Weather.formatWeatherData(data);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/weather.js\n// module id = 3\n// module chunks = 0","//本地存储\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // Node, CommonJS\n    module.exports = factory();\n  } else {\n    // 浏览器全局变量(root 即 window)\n    root.StoragePolyfill = factory();\n  }\n}(this, function() {\n  function StoragePolyfill(fileName, expires, type) {\n    var T = this;\n    T.fileName = fileName || \"\",\n      T.expiresDay = expires || 0,\n      T.isIE = navigator.userAgent.indexOf(\"MSIE\") != -1 && !window.opera,\n      T.isInit = !1,\n      T.target = document.documentElement,\n      T.type = type || \"json\",\n      T.init();\n  };\n\n  StoragePolyfill.prototype = {\n    init: function() {\n      var e = this;\n      !window.localStorage && e.isIE && (e.isInit || (document.documentElement.addBehavior(\"#default#userdata\"), e.isInit = !0))\n    },\n    set: function(key, value, type) {\n      var T = this;\n      type = type || T.type, type == \"json\" && (value = JSON.stringify(value));\n      if (window.localStorage)\n        localStorage.setItem(key, value);\n      else if (T.isIE) {\n        var target = T.target,\n          s = T.fileName;\n        target.load(s),\n          target.setAttribute(key, value),\n          target.expires = (new Date((new Date).getTime() + T.expiresDay * 864e5)).toUTCString(),\n          target.save(s);\n      }\n    },\n    get: function(e, t) {\n      var n = this;\n      t = t || n.type;\n      if (window.localStorage)\n        return t == \"json\" ? JSON.parse(localStorage.getItem(e)) : localStorage.getItem(e);\n      if (n.isIE) {\n        var r = n.target,\n          i = n.fileName;\n        try {\n          return r.load(i), t == \"json\" ? JSON.parse(n.target.getAttribute(e)) : n.target.getAttribute(e);\n        } catch (s) {\n          return null;\n        }\n      }\n    },\n    remove: function(e) {\n      var t = this;\n      if (window.localStorage)\n        localStorage.removeItem(e);\n      else if (t.isIE) {\n        var n = t.target,\n          r = t.fileName;\n        n.load(r);\n        n.removeAttribute(e);\n        n.expires = (new Date((new Date).getTime() - 1)).toUTCString();\n        n.save(r);\n      }\n    }\n  };\n  return StoragePolyfill;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cnpm/storage/index.js\n// module id = 4\n// module chunks = 0","// 城市处理函数\nvar $JSONP = require('./jsonp').$jsonp;\nvar CookieUtil = require('@cnpm/cookie-util');\n\nvar City = function() {\n  return {\n      cities: [\"s_province\", \"s_city\", \"s_county\"], //三个select的id\n      seachURL: 'http://www.chinaso.com/search/pagesearch.htm?q=',\n      cityURL: 'http://www.chinaso.com/weather/city', //http://10.10.176.20:8780/weather/city/cityJsonCallback1?areaid=110000\n      defCityCode: ['110000', '110100', '110000'],\n      cityCodeCookieName: 'CITY_CODE', //城市code存储的cookie名.\n      getWeatherURL: 'http://www.chinaso.com/weather/query/updateWheatherState', //http://10.10.176.20:8780/weather/query/updateWheatherState?city=110000\n\n      /**\n       * 2016-08-16 pangzhihao\n       * 增加特殊频道天气指定逻辑\n       * 获得当前城市天气\n       * @return {[type]} [description]\n       */\n      getCurrentCity: function() {\n          var day = new Date();\n          var T = this;\n          var citystr = '';\n          var allCityCode = CookieUtil.get(T.cityCodeCookieName, true);\n          var arrCode = allCityCode ? allCityCode.split(',') : [];\n          var curCityCode = arrCode.length && arrCode[2] ? arrCode[2] : '';\n          var url = T.getWeatherURL;\n          citystr = window[\"HOST-CITY\"] ? (window[\"HOST-CITY\"][location.host.split('.')[0]] || '') : '';\n\n          //若城市code存在，则使用城市code，若不存在判断城市名是否存在.\n          if (curCityCode) {\n              citystr = curCityCode;\n          }\n          url = url + '?city=' + citystr;\n          $JSONP(url, null, true);\n      },\n\n      /**\n       * 初始化城市数据\n       * @return {}\n       */\n      initCityChange: function() {\n          var T = this;\n          var defCode = T.defCityCode;\n\n          //取cookie中存的城市code覆盖默认城市code.\n          var cookieCityCode = CookieUtil.get(T.cityCodeCookieName, true);\n          if (cookieCityCode && cookieCityCode.length) {\n              var arr = cookieCityCode.split(',');\n              T.updateDefCityCode(arr[0], arr[1], arr[2]);\n          }\n\n          T.sendCityJsonP('0', 0); //初始化省的下拉列表数据.\n          T.sendCityJsonP(defCode[0], 1); //初始化所选择的省下市的下拉列表.\n          T.sendCityJsonP(defCode[1], 2); //初始化所选市下区县的下拉列表.\n      },\n\n      /**\n       * 获取cookie中的三级城市信息，若存在且不为空，则将默认城市信息修改\n       */\n      updateDefCityCode: function(province, city, county) {\n          var T = this;\n          T.defCityCode[0] = province || T.defCityCode[0];\n          T.defCityCode[1] = city || T.defCityCode[1];\n          T.defCityCode[2] = county || T.defCityCode[2];\n      },\n\n      /**\n       * 点击城市切换确认按钮后，将所选城市的编码信息存入cookie.\n       */\n      updateCookieCityInfo: function() {\n          var T = this;\n          var d = new Date();\n          d.setFullYear(2099);\n          //CookieUtil.set('city', ct, d, '.chinaso.com');\n          CookieUtil.set(T.cityCodeCookieName, T.defCityCode.join(','), d, document.domain);\n      },\n\n      /**\n       * @param  {number} 城市对应的id\n       * @param  {number} 城市类型 0 省直辖市 1 市 2区县\n       * 发送城市请求\n       */\n      sendCityJsonP: function(areaID, areaType) {\n          var T = this;\n          var url = T.cityURL + '/cityJsonCallback' + areaType + '?areaid=' + areaID;\n          $JSONP(url, null, true);\n      },\n\n      /**\n       * @param  {array}\n       * @param  {number} 城市类型 0 省直辖市 1 市 2区县\n       * 城市信息回调.\n       */\n      cityJsonCallback: function(data, areaType) {\n          var T = this;\n          var $wrap = $('#' + T.cities[areaType]);\n          var listLen = data && data.length || 0;\n          var options = '';\n          if (listLen) {\n              for (var i = 0; i < listLen; i++) {\n                  var cur = data[i];\n                  options += '<option value=\"' + cur.areaid + '\">' + cur.namecn + '</option>';\n              }\n              $wrap.html(options);\n              if (areaType === '0') {\n                  setTimeout(function() {\n                      T.setChoosedCity(); //下拉列表中选中当前所在的城市,第一次页面初始化时候执行.\n                  }, 200);\n                  T.initProvChange(); //只会执行一次.避免事件重复绑定.\n              } else {\n                  T.bindCityChange();\n              }\n          }\n      },\n\n      /**\n       * 将下拉列表中展示的城市设置为用户已经选择的城市.\n       */\n      setChoosedCity: function() {\n          var T = this;\n          var sels = T.cities;\n          var cookiesCode = T.defCityCode;\n          for (var i = 0, len = sels.length; i < len; i++) {\n              var $curSel = $('#' + sels[i]);\n              $curSel.val(cookiesCode[i]);\n          }\n      },\n\n      /**\n       * 初始化省的点击事件.\n       * @return {[type]} [description]\n       */\n      initProvChange: function() {\n          var T = this;\n          var sels = T.cities;\n          var $provice = $('#' + sels[0]);\n          $provice.on('change', function() {\n              var $this = $(this);\n              var val = $this.val(); //所选省的id.\n              var cityCode = val.replace(/0000/, '0100'); //所选省对应的省会id.\n\n              T.sendCityJsonP(val, 1); //获取省对应的城市信息.\n              T.sendCityJsonP(cityCode, 2); //获取省会对应的区信息.\n          });\n      },\n\n      /**\n       * 市区信息点击事件.\n       * @return {[type]} [description]\n       */\n      bindCityChange: function() {\n          var T = this;\n          var sels = T.cities;\n          var $cities = $('#' + sels[1]);\n          var $counties = $('#' + sels[2]);\n\n          $cities.off('change').on('change', function() {\n              var $this = $(this);\n              var val = $this.val();\n              T.sendCityJsonP(val, 2);\n          });\n          $counties.off('change').on('change', function() {\n              var $this = $(this);\n              var val = $this.val();\n          });\n      }\n  };\n}();\n\n/**\n* 省直辖市信息回调\n*/\nwindow.cityJsonCallback0 = function(data) {\n  City.cityJsonCallback(data, '0');\n}\n/**\n* 市信息回调\n*/\nwindow.cityJsonCallback1 = function(data) {\n  City.cityJsonCallback(data, '1');\n}\n/**\n* 区县信息回调\n*/\nwindow.cityJsonCallback2 = function(data) {\n  City.cityJsonCallback(data, '2');\n}\n\nmodule.exports = City;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/city.js\n// module id = 5\n// module chunks = 0","// JSONP对象\n// 处理异步请求jsonp方式\nvar JSONP = function(url, callback, callbackFn) {\n  var s = document.createElement(\"script\"),\n    first = document.getElementsByTagName(\"script\")[0];\n  s.type = \"text/javascript\";\n  s.src = !callback ? url : url + (url.indexOf(\"?\") == -1 ? \"?\" : \"&\") + \"jsonpcallback=\" + callback;\n  first.parentNode.insertBefore(s, first);\n\n  if (typeof callbackFn === 'function') {\n    if (s.readyState) {\n      s.onreadystatechange = function() {\n        var r = s.readyState;\n        if (r === 'loaded' || r === 'complete') {\n          s.onreadystatechange = null;\n          callbackFn();\n        }\n      };\n    } else {\n      s.onload = function() {\n        callbackFn();\n      };\n    }\n  }\n};\n\n//jquery jsonp\nvar $JSONP = function(url, jsonpName, isCache, asy) {\n  return $.ajax({\n    type: 'get',\n    url: url,\n    dataType: 'jsonp',\n    contentType: 'application/x-www-form-urlencoded;charset=utf-8',\n    timeout: 30000,\n    jsonp: jsonpName || 'jsonpcallback',\n    cache: isCache || false,\n    async: asy || true\n  });\n};\n\nmodule.exports = {\n  jsonp: JSONP,\n  $jsonp: $JSONP\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/jsonp.js\n// module id = 6\n// module chunks = 0","/**\n * 天气预报js版本.\n * 用途：用来比对客户端天气预报缓存版本号\n * 若缓存数据版本号与js程序版本号不一致\n * 则请求新的天气预报并更新本地缓存数据\n */\nvar jsVersion = window[\"WEATHER_STORAGE_VERSION\"] ? window[\"WEATHER_STORAGE_VERSION\"] : '1.0.2';\n\nmodule.exports = jsVersion;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/version.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}